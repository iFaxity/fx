"use strict";Object.defineProperty(exports,"__esModule",{value:!0});
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
const e=new WeakMap,t=t=>"function"==typeof t&&e.has(t),s=void 0!==window.customElements&&void 0!==window.customElements.polyfillWrapFlushCallback,n=(e,t,s=null)=>{for(;t!==s;){const s=t.nextSibling;e.removeChild(t),t=s}},i={},r={},o=`{{lit-${String(Math.random()).slice(2)}}}`,l=`\x3c!--${o}--\x3e`,a=new RegExp(`${o}|${l}`);class c{constructor(e,t){this.parts=[],this.element=t;const s=[],n=[],i=document.createTreeWalker(t.content,133,null,!1);let r=0,l=-1,c=0;const{strings:h,values:{length:m}}=e;for(;c<m;){const e=i.nextNode();if(null!==e){if(l++,1===e.nodeType){if(e.hasAttributes()){const t=e.attributes,{length:s}=t;let n=0;for(let e=0;e<s;e++)u(t[e].name,"$lit$")&&n++;for(;n-- >0;){const t=h[c],s=p.exec(t)[2],n=s.toLowerCase()+"$lit$",i=e.getAttribute(n);e.removeAttribute(n);const r=i.split(a);this.parts.push({type:"attribute",index:l,name:s,strings:r}),c+=r.length-1}}"TEMPLATE"===e.tagName&&(n.push(e),i.currentNode=e.content)}else if(3===e.nodeType){const t=e.data;if(t.indexOf(o)>=0){const n=e.parentNode,i=t.split(a),r=i.length-1;for(let t=0;t<r;t++){let s,r=i[t];if(""===r)s=d();else{const e=p.exec(r);null!==e&&u(e[2],"$lit$")&&(r=r.slice(0,e.index)+e[1]+e[2].slice(0,-"$lit$".length)+e[3]),s=document.createTextNode(r)}n.insertBefore(s,e),this.parts.push({type:"node",index:++l})}""===i[r]?(n.insertBefore(d(),e),s.push(e)):e.data=i[r],c+=r}}else if(8===e.nodeType)if(e.data===o){const t=e.parentNode;null!==e.previousSibling&&l!==r||(l++,t.insertBefore(d(),e)),r=l,this.parts.push({type:"node",index:l}),null===e.nextSibling?e.data="":(s.push(e),l--),c++}else{let t=-1;for(;-1!==(t=e.data.indexOf(o,t+1));)this.parts.push({type:"node",index:-1}),c++}}else i.currentNode=n.pop()}for(const e of s)e.parentNode.removeChild(e)}}const u=(e,t)=>{const s=e.length-t.length;return s>=0&&e.slice(s)===t},h=e=>-1!==e.index,d=()=>document.createComment(""),p=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
class m{constructor(e,t,s){this.__parts=[],this.template=e,this.processor=t,this.options=s}update(e){let t=0;for(const s of this.__parts)void 0!==s&&s.setValue(e[t]),t++;for(const e of this.__parts)void 0!==e&&e.commit()}_clone(){const e=s?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),t=[],n=this.template.parts,i=document.createTreeWalker(e,133,null,!1);let r,o=0,l=0,a=i.nextNode();for(;o<n.length;)if(r=n[o],h(r)){for(;l<r.index;)l++,"TEMPLATE"===a.nodeName&&(t.push(a),i.currentNode=a.content),null===(a=i.nextNode())&&(i.currentNode=t.pop(),a=i.nextNode());if("node"===r.type){const e=this.processor.handleTextExpression(this.options);e.insertAfterNode(a.previousSibling),this.__parts.push(e)}else this.__parts.push(...this.processor.handleAttributeExpressions(a,r.name,r.strings,this.options));o++}else this.__parts.push(void 0),o++;return s&&(document.adoptNode(e),customElements.upgrade(e)),e}}
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const f=` ${o} `;class g{constructor(e,t,s,n){this.strings=e,this.values=t,this.type=s,this.processor=n}getHTML(){const e=this.strings.length-1;let t="",s=!1;for(let n=0;n<e;n++){const e=this.strings[n],i=e.lastIndexOf("\x3c!--");s=(i>-1||s)&&-1===e.indexOf("--\x3e",i+1);const r=p.exec(e);t+=null===r?e+(s?f:l):e.substr(0,r.index)+r[1]+r[2]+"$lit$"+r[3]+o}return t+=this.strings[e],t}getTemplateElement(){const e=document.createElement("template");return e.innerHTML=this.getHTML(),e}}
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const v=e=>null===e||!("object"==typeof e||"function"==typeof e),w=e=>Array.isArray(e)||!(!e||!e[Symbol.iterator]);class _{constructor(e,t,s){this.dirty=!0,this.element=e,this.name=t,this.strings=s,this.parts=[];for(let e=0;e<s.length-1;e++)this.parts[e]=this._createPart()}_createPart(){return new y(this)}_getValue(){const e=this.strings,t=e.length-1;let s="";for(let n=0;n<t;n++){s+=e[n];const t=this.parts[n];if(void 0!==t){const e=t.value;if(v(e)||!w(e))s+="string"==typeof e?e:String(e);else for(const t of e)s+="string"==typeof t?t:String(t)}}return s+=e[t],s}commit(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()))}}class y{constructor(e){this.value=void 0,this.committer=e}setValue(e){e===i||v(e)&&e===this.value||(this.value=e,t(e)||(this.committer.dirty=!0))}commit(){for(;t(this.value);){const e=this.value;this.value=i,e(this)}this.value!==i&&this.committer.commit()}}class x{constructor(e){this.value=void 0,this.__pendingValue=void 0,this.options=e}appendInto(e){this.startNode=e.appendChild(d()),this.endNode=e.appendChild(d())}insertAfterNode(e){this.startNode=e,this.endNode=e.nextSibling}appendIntoPart(e){e.__insert(this.startNode=d()),e.__insert(this.endNode=d())}insertAfterPart(e){e.__insert(this.startNode=d()),this.endNode=e.endNode,e.endNode=this.startNode}setValue(e){this.__pendingValue=e}commit(){for(;t(this.__pendingValue);){const e=this.__pendingValue;this.__pendingValue=i,e(this)}const e=this.__pendingValue;e!==i&&(v(e)?e!==this.value&&this.__commitText(e):e instanceof g?this.__commitTemplateResult(e):e instanceof Node?this.__commitNode(e):w(e)?this.__commitIterable(e):e===r?(this.value=r,this.clear()):this.__commitText(e))}__insert(e){this.endNode.parentNode.insertBefore(e,this.endNode)}__commitNode(e){this.value!==e&&(this.clear(),this.__insert(e),this.value=e)}__commitText(e){const t=this.startNode.nextSibling,s="string"==typeof(e=null==e?"":e)?e:String(e);t===this.endNode.previousSibling&&3===t.nodeType?t.data=s:this.__commitNode(document.createTextNode(s)),this.value=e}__commitTemplateResult(e){const t=this.options.templateFactory(e);if(this.value instanceof m&&this.value.template===t)this.value.update(e.values);else{const s=new m(t,e.processor,this.options),n=s._clone();s.update(e.values),this.__commitNode(n),this.value=s}}__commitIterable(e){Array.isArray(this.value)||(this.value=[],this.clear());const t=this.value;let s,n=0;for(const i of e)s=t[n],void 0===s&&(s=new x(this.options),t.push(s),0===n?s.appendIntoPart(this):s.insertAfterPart(t[n-1])),s.setValue(i),s.commit(),n++;n<t.length&&(t.length=n,this.clear(s&&s.endNode))}clear(e=this.startNode){n(this.startNode.parentNode,e.nextSibling,this.endNode)}}class E extends _{constructor(e,t,s){super(e,t,s),this.single=2===s.length&&""===s[0]&&""===s[1]}_createPart(){return new N(this)}_getValue(){return this.single?this.parts[0].value:super._getValue()}commit(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue())}}class N extends y{}let T=!1;try{const e={get capture(){return T=!0,!1}};window.addEventListener("test",e,e),window.removeEventListener("test",e,e)}catch(e){}
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */function b(e){let t=V.get(e.type);void 0===t&&(t={stringsArray:new WeakMap,keyString:new Map},V.set(e.type,t));let s=t.stringsArray.get(e.strings);if(void 0!==s)return s;const n=e.strings.join(o);return s=t.keyString.get(n),void 0===s&&(s=new c(e,e.getTemplateElement()),t.keyString.set(n,s)),t.stringsArray.set(e.strings,s),s}const V=new Map,A=new WeakMap;
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.1.2");const k=[Map,Set,WeakMap,WeakSet];function O(e){return null!=e&&"object"==typeof e}function M(e){return"function"==typeof e}function C(e){return k.some(t=>e instanceof t)}function R(e){return O(e)||C(e)}function S(e,t){return Object.entries(t).reduce((t,[s,n])=>{let[i,r]=e(s,n);return t[i]=r,t},{})}function D(e){return e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").replace(/([A-Z])([A-Z])(?=[a-z])/g,"$1-$2").toLowerCase()}class P{constructor(e,t,s){if(this.value=void 0,2!==s.length||""!==s[0]||""!==s[1])throw new Error("Conditional attributes can only contain a single expression");this.element=e,this.name=t,this.strings=s}setValue(e){if(!O(e))throw new TypeError("Bind can only work with Object");this.value=e}commit(){Object.entries(this.value).forEach(([e,t])=>{t?this.element.setAttribute(e,t.toString()):this.element.removeAttribute(e)})}}const U=new WeakMap;var $;!function(e){e.SET="set",e.ADD="add",e.DELETE="delete",e.CLEAR="clear"}($||($={}));const L=Symbol("iterate"),F=[];let B=null;class H{constructor(e,t={}){this.active=!0,this.deps=[],this.options=t,this.raw=H.isFx(e)?e.raw:e,t.lazy||this.run()}static isFx(e){return e instanceof H}static track(e,t){if(!B)return;let s=U.get(e);s||(s=new Map,U.set(e,s));let n=s.get(t);n||(n=new Set,s.set(t,n)),n.has(B)||(n.add(B),B.deps.push(n))}static trigger(e,t,s){const n=U.get(e);if(!n)return;const i=new Set,r=new Set,o=e=>{e&&e.forEach(e=>(e.options.computed?r:i).add(e))};if(t==$.CLEAR)n.forEach(o);else if(s&&o(n.get(s)),t==$.ADD||t==$.DELETE){const t=Array.isArray(e)?"length":L;o(n.get(t))}r.forEach(e=>e.scheduleRun()),i.forEach(e=>e.scheduleRun())}run(...e){if(!this.active)return this.raw(...e);if(!F.includes(this)){this.cleanup();try{return F.push(this),B=this,this.raw(...e)}finally{F.pop(),B=F[F.length-1]}}}cleanup(){const{deps:e}=this;if(e.length){for(let t=0;t<e.length;t++)e[t].delete(this);e.length=0}}scheduleRun(){this.options.scheduler?this.options.scheduler(this.run):this.run()}stop(){this.active&&(this.cleanup(),this.active=!1)}}const j=Symbol("ref"),W=new WeakMap;function z(e){return O(e)?ee(e):e}function q(e){return(e[j]=!0)&&e}function I(e){return{get(t,s){const n=t[s];return K(n)?n.value:(H.track(t,s),O(n)?e?te(n):ee(n):n)},set(t,s,n){if(e)throw new TypeError("Collection is readonly");const i=t[s];return n=G(n),K(i)&&!K(n)?(i.value=n,!0):(t[s]=n,t.hasOwnProperty(s)?n===i||n!=n&&i!=i||H.trigger(t,$.SET,s):H.trigger(t,$.ADD,s),!0)},deleteProperty(t,s){if(e)throw new TypeError("Collection is readonly");const n=delete t[s];return n&&t.hasOwnProperty(s)&&H.trigger(t,$.DELETE,s),n},has:(e,t)=>(H.track(e,t),t in e),ownKeys:e=>(H.track(e,L),Reflect.ownKeys(e))}}function Z(e){const t={get(e){const t=G(this);return e=G(e),H.track(t,e),z(t.get(e))},get size(){const e=G(this);return H.track(e,L),e.size},has(e){const t=G(this);return e=G(e),H.track(t,e),t.has(e)},add(t){if(e)throw new TypeError("Collection is readonly");t=G(t);const s=G(this),n=s.has(t),i=s.add(t);return n||H.trigger(s,$.ADD,t),i},set(t,s){if(e)throw new TypeError("Collection is readonly");s=G(s),t=G(t);const n=G(this),i=n.has(t),r=n.set(t,s),o=n.get(t);return i?s===o||s!=s&&o!=o||H.trigger(n,$.SET,t):H.trigger(n,$.ADD,t),r},delete(t){if(e)throw new TypeError("Collection is readonly");t=G(t);const s=G(this),n=s.has(t),i=s.delete(t);return n&&H.trigger(s,$.DELETE,t),i},clear(){if(e)throw new TypeError("Collection is readonly");const t=G(this),s=0!=t.size,n=t.clear();return s&&H.trigger(t,$.CLEAR),n},forEach(e,t){const s=G(this);return H.track(s,L),s.forEach((t,s)=>e.call(this,z(t),z(s),this),t)}};return{get:(e,s)=>(t.hasOwnProperty(s)&&s in e?t:e)[s]}}function K(e){return null!=e&&!!e[j]}function G(e){var t;return null!=(t=W.get(e))?t:e}function J(e){return K(e)?e.value:G(e)}function Q(e,t){return q({get value(){return e[t]},set value(s){e[t]=s}})}function X(e){return S(t=>[t,Q(e,t)],e)}function Y(e){if(K(e))return e;let t=z(e);const s={get value(){return H.track(s,"value"),t},set value(e){t=z(e),H.trigger(s,$.SET,"value")}};return q(s)}function ee(e){let t=W.get(e);if(!t){let s;if(C(e))s=Z(!1);else{if(!R(e))throw new TypeError("target is not observable");s=I(!1)}t=new Proxy(e,s)}return t}function te(e){let t=W.get(e);if(!t){let s;if(C(e))s=Z(!0);else{if(!R(e))throw new TypeError("target is not observable");s=I(!0)}t=new Proxy(e,s)}return t}ee({kek:"",lel:0}),Y(0);class se{constructor(e,t,s){if(this.value=void 0,this.__pendingValue=void 0,2!=s.length||""!==s[0]||""!==s[1])throw new Error("Conditional attributes can only contain a single expression");this.element=e,this.name=t,this.strings=s,this.comment=document.createComment("")}setValue(e){this.__pendingValue=J(e)}commit(){for(var e;t(this.__pendingValue);){const e=this.__pendingValue;this.__pendingValue=i,e(this)}if(this.__pendingValue===i)return;const{element:s,comment:n}=this,r=!!this.__pendingValue,o="not"==this.name?!r:r;if(this.value!==o){const t=o?n:s,i=o?s:n;null===(e=t.parentNode)||void 0===e||e.replaceChild(i,t),this.value=o}this.__pendingValue=i}}const ne=()=>{};class ie{constructor(e,t,s){this.hasMods=!1,this.__pendingValue=void 0;const[n,...i]=t.split("."),r=i.includes("prevent"),o=i.includes("stop"),l=i.includes("self");this.value=ne,this.element=e,this.eventName=n,this.hasMods=r||o,this.options={capture:i.includes("capture"),once:i.includes("once"),passive:i.includes("passive")},this.boundListener=t=>{l&&t.target!==e||(r&&t.preventDefault(),o&&t.stopPropagation(),this.value.call(null!=s?s:e,t))}}setValue(e){const t=null!=e?e:ne;if(!M(t))throw new TypeError("Lit: Events can only be bound to functions");this.__pendingValue=t}commit(){for(;t(this.__pendingValue);){const e=this.__pendingValue;this.__pendingValue=i,e(this)}if(this.__pendingValue==i)return;const e=this.__pendingValue||ne;this.value==ne||e!=ne||this.hasMods||this.element.removeEventListener(this.eventName,this.boundListener,this.options),(this.value==ne&&e!=ne||this.hasMods)&&this.element.addEventListener(this.eventName,this.boundListener,this.options),this.value=this.__pendingValue,this.__pendingValue=i}}function re(e){return S((e,t)=>{var s,n,i,r;const o={default:void 0,validator:null,required:!1,cast:!1};if(null==t?o.type=null:M(t)?o.type=[t]:Array.isArray(t)?o.type=t:O(t)&&(o.type=null!=(s=t.type)?s:null,o.default=null!=(n=t.default)?n:void 0,o.validator=null!=(i=t.validator)?i:null,o.required=!!t.required),!(null===(r=o.type)||void 0===r?void 0:r.every(M)))throw new TypeError(`Type invalid in prop '${e}'!`);return[e,o]},e)}function oe(e,t,s){const{type:n,required:i,validator:r,cast:o}=e[t];if(null!=s&&!n.some(e=>Object.getPrototypeOf(s)==e.prototype))throw new Error(`Type error in prop '${t}'.`);if(i&&void 0===s)throw new Error(`Value required in prop '${t}'.`);if(r&&!r(s))throw new Error(`Validation error in prop '${t}'.`);if(o)if(n[0]===Boolean)null==s||"false"==s?s=!1:""!==s&&"true"!=s||(s=!0);else if(n[0]===Number){let e=+s;isNaN(e)||(s=e)}return s}const le=[];let ae=null;function ce(){for(;le.length;){le.pop()()}}function ue(e){0==le.length&&(ae=requestAnimationFrame(ce)),le.push(e)}let he=null;const de=[],pe=new WeakMap;var me;!function(e){e.BEFORE_MOUNT="beforeMount",e.MOUNTED="mounted",e.BEFORE_UPDATE="beforeUpdate",e.UPDATED="updated",e.BEFORE_UNMOUNT="beforeUnmount",e.UNMOUNTED="unmounted"}(me||(me={}));class fe{constructor(e,t){this.el=e,this.model=t.model,this.attrs=t.attrs,this.props=t.props}emit(e,t){let s=void 0!==t?new CustomEvent(e,{detail:t}):new Event(e);this.el.dispatchEvent(s)}}class ge{constructor(e,t){if(this.rendering=!1,this.mounted=!1,this.options=t,this.ctx=new fe(e,t),this.hooks=S((e,t)=>[t,[]],me),this.renderOptions={templateFactory:b,eventContext:e},this.fx=new H(this.render.bind(this),{lazy:!0,computed:!1,scheduler:this.scheduleRender.bind(this)}),this.props=ee(S((e,t)=>{const{type:s,default:n}=t;let i=M(n)?n():n;return null!=s&&void 0===n&&1==s.length&&s[0]==Boolean&&(i=!0),[e,i]},t.props)),this.shadowRoot=e.attachShadow({mode:t.closed?"closed":"open"}),this.renderTemplate=t.setup.call(void 0,X(this.props),this.ctx),!M(this.renderTemplate))throw new TypeError("Setup functions must return a function which return a TemplateResult")}callHooks(e){var t;const s=this.hooks[e];(null===(t=s)||void 0===t?void 0:t.length)&&s.forEach(e=>M(e)&&e())}scheduleRender(e){this.rendering||(this.rendering=!0,ue(()=>{this.mounted&&this.callHooks(me.BEFORE_UPDATE),e.call(this.fx),this.mounted&&this.callHooks(me.UPDATED),this.rendering=!1,this.mounted=!0}))}render(){const{shadowRoot:e,mounted:t,options:s}=this,i=this.renderTemplate();if(!(i instanceof g))throw new Error("FxElement.render() must return a TemplateResult");if(((e,t,s)=>{let i=A.get(t);void 0===i&&(n(t,t.firstChild),A.set(t,i=new x(Object.assign({templateFactory:b},s))),i.appendInto(t)),i.setValue(e),i.commit()})(i,e,this.renderOptions),!t&&"string"==typeof s.styles){const t=document.createElement("style");t.textContent=s.styles,e.insertBefore(t,e.firstChild)}}}class ve extends HTMLElement{constructor(e){var t;super(),he=this,de.push(this);const s=new ge(this,e);pe.set(this,s),t=de[de.length-1],he=null!=t?t:null;const{props:n}=s.options,i=s.props;for(let e of Object.keys(n)){if(this.hasOwnProperty(e))throw new Error(`Prop ${e} is reserved, please use another.`);oe(n,e,i[e]),Object.defineProperty(this,e,{get:()=>i[e],set:t=>{i[e]=oe(n,e,t)}})}s.fx.scheduleRun()}connectedCallback(){const e=pe.get(this);e.callHooks(me.BEFORE_MOUNT),e.callHooks(me.MOUNTED)}disconnectedCallback(){const e=pe.get(this);e.callHooks(me.BEFORE_UNMOUNT),e.callHooks(me.UNMOUNTED)}attributeChangedCallback(e,t,s){if(t!==s){const t=pe.get(this),{attrs:n,props:i}=t.options,r=n[e];this[r]=oe(i,r,s)}}}class we{constructor(e,t){let s,n,[i,...r]=t.split(".");if(this.element=e,this.commit=()=>{this.element[i]=this.ref.value},""===i){const t=e.tagName.toLowerCase(),o=e.type,l="input"==t;if("select"==t)s="change",n=this.selectHandler,this.commit=this.selectCommit;else if(l&&"checkbox"==o)s="change",n=this.checkboxHandler,this.commit=this.checkboxCommit;else if(l&&"radio"==o)s="change",i="value",this.commit=this.radioCommit;else if(l||"textarea"==t)s=r.includes("lazy")?"change":"input",i="value";else{if(!(e instanceof ve))throw new Error(`Model not supported for element '${t}'.`);{const t=pe.get(e);s=t.options.model.event,i=t.options.model.prop}}}const o=r.includes("number"),l=r.includes("trim");e.addEventListener(null!=s?s:`fxsync:${i}`,e=>{e.stopPropagation();let t=M(n)?n():this.element[i];if("string"==typeof t&&(l&&(t=t.trim()),o)){const e=parseFloat(t);isNaN(e)||(t=e)}this.ref.value=t},!1)}setValue(e){if(!K(e))throw new TypeError("Sync attributes values requires a ref as their value!");this.ref=e}selectHandler(){var e;const t=this.element,s=t.selectedOptions;let n;return n=t.multiple?s.length?Array.from(s).map(e=>e.value):[]:null===(e=s[0])||void 0===e?void 0:e.value,n}selectCommit(){const e=this.element,{options:t}=e,s=this.value;if(e.multiple){const e=s;for(let s of t)s.selected=e.includes(s.value)}else for(let e of t)e.selected=e.value===s}radioCommit(){const e=this.element;e.checked=this.ref.value===e.value}checkboxHandler(){const e=this.element,t=this.ref.value,{value:s,checked:n}=e;if(Array.isArray(t)){const e=t.indexOf(s);return e>=0?t.splice(e,1):t.push(s),t}return null!=s?s:n}checkboxCommit(){const e=this.element,t=this.ref.value;if(Array.isArray(t)){const s=t;e.checked=s.includes(e.value)}else e.checked=t===e.value}}class _e extends y{constructor(e,t){super(e),this.name=t,this.mapValue="class"==t||"style"==t}setValue(e){let t=J(e);this.mapValue&&(Array.isArray(t)?t=t.filter(e=>e).join(" "):O(t)&&(t=Object.entries(t).reduce((e,[t,s])=>(s&&e.push(t),e),[]).join(" "))),super.setValue(t)}}class ye extends x{setValue(e){super.setValue(J(e))}}class xe extends class{constructor(e,t,s){if(this.value=void 0,this.__pendingValue=void 0,2!==s.length||""!==s[0]||""!==s[1])throw new Error("Boolean attributes can only contain a single expression");this.element=e,this.name=t,this.strings=s}setValue(e){this.__pendingValue=e}commit(){for(;t(this.__pendingValue);){const e=this.__pendingValue;this.__pendingValue=i,e(this)}if(this.__pendingValue===i)return;const e=!!this.__pendingValue;this.value!==e&&(e?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name),this.value=e),this.__pendingValue=i}}{setValue(e){super.setValue(J(e))}}class Ee extends _{_createPart(){return new _e(this,this.name)}}class Ne extends E{_createPart(){return new _e(this,null)}}const Te=new Map([[".",(e,t,s)=>new Ne(e,t,s).parts],["@",(e,t,s,n)=>[new ie(e,t,n.eventContext)]],["?",(e,t,s)=>[new xe(e,t,s)]],["&",(e,t)=>[new we(e,t)]],["!",(e,t,s)=>[new se(e,t,s)]],[":",(e,t,s)=>[new P(e,t,s)]]]);const be=new class{handleAttributeExpressions(e,t,s,n){const i=t[0];if(Te.has(i)){return Te.get(i)(e,t.slice(1),s,n)}return new Ee(e,t,s).parts}handleTextExpression(e){return new ye(e)}};function Ve(e,t){if(he)throw new Error("No active element instance!");pe.get(he).hooks[e].push(t)}exports.computed=function(e){let t,s,n;if(M(e))s=e,t=()=>{};else{if(!O(e))throw new TypeError("");{const n=e;s=n.get,t=n.set}}let i=!0;const r=new H(s,{lazy:!0,computed:!0,scheduler:()=>{i=!0}});return q({get value(){if(i&&(n=r.run(),i=!1),null!=B)for(const e of r.deps)e.has(B)||(e.add(B),B.deps.push(e));return n},set value(e){t(e)}})},exports.defineElement=function(e){const t=function(e){var t,s,n,i,r,o,l;const{setup:a,model:c}=e,u=null!=(t=e.props)?t:{};return{name:D(e.name),closed:(s=e.closed,null!=s&&s),props:e.props?re(u):u,attrs:S(e=>[D(e),e],u),model:{prop:(i=null===(n=c)||void 0===n?void 0:n.prop,null!=i?i:"value"),event:(o=null===(r=c)||void 0===r?void 0:r.event,null!=o?o:"input")},setup:null!=a?a:null,styles:(l=e.styles,null!=l?l:null)}}(e),s=Object.keys(t.attrs);t.name.includes("-")||console.warn("Fx: Component names should include a hyphen (-) or be camelised with at least 2 uppser case characters.");const n=class extends ve{static get is(){return t.name}static get observedAttributes(){return s}constructor(){super(t)}};return window.customElements.define(t.name,n),n},exports.html=(e,...t)=>new g(e,t,"html",be),exports.isReactive=function(e){return W.has(e)},exports.isRef=K,exports.onBeforeMount=function(e){Ve(me.BEFORE_MOUNT,e)},exports.onBeforeUnmount=function(e){Ve(me.BEFORE_UNMOUNT,e)},exports.onBeforeUpdate=function(e){Ve(me.BEFORE_UPDATE,e)},exports.onMounted=function(e){Ve(me.MOUNTED,e)},exports.onUnmounted=function(e){Ve(me.UNMOUNTED,e)},exports.onUpdated=function(e){Ve(me.UPDATED,e)},exports.reactive=ee,exports.readonly=te,exports.ref=Y,exports.svg=(e,...t)=>new g(e,t,"svg",be),exports.toRaw=G,exports.toRawValue=J,exports.toRef=Q,exports.toRefs=X,exports.watch=function(e){if(!M(e))throw new TypeError("watch can an only watch functions");new H(e,{lazy:!1,computed:!1})};
//# sourceMappingURL=index.cjs.js.map
